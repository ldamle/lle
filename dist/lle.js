!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.lle=t():n.lle=t()}(this,(()=>(()=>{"use strict";var n={154:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var e=function(){function n(n,t){this.in=!1,this.out=n,t&&(Array.isArray(t)?(this.out=n,this.in=t):(this.out=n,this.in=[t]))}return n.prototype.inConnect=function(n){return Array.isArray(this.in)?this.in.push(n):this.in=[n],this},n.prototype.disConnect=function(n){if(Array.isArray(this.in)){for(var t=0;t<this.in.length;t++)if(this.in[t].name===n.name&&this.in[t].element===n.element){this.in.splice(t,1);break}0==this.in.length&&(this.in=!1)}return this},n.prototype.inConnects=function(n){var t;return Array.isArray(this.in)?(t=this.in).push.apply(t,n):this.in=n,this},n.prototype.disConnects=function(n){if(Array.isArray(this.in))for(var t=0;t<n.length;t++)this.disConnect(n[t]);return this},n.prototype.isConnected=function(){return Array.isArray(this.in)&&this.in.length>0},n.prototype.lenInConnected=function(){return Array.isArray(this.in)?this.in.length:0},n.prototype.clone=function(t){return new n({name:this.out.name,element:t})},n.prototype.getArrayInString=function(){var n=[];if(Array.isArray(this.in))for(var t=0;t<this.in.length;t++)n.push(this.in[t].name);return n},n.prototype.findInString=function(n){if(Array.isArray(this.in))for(var t=0;t<this.in.length;t++)if(this.in[t].element===n)return this.in[t].name;return""},n}();t.default=e},332:function(n,t,e){var o=this&&this.__spreadArray||function(n,t,e){if(e||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return n.concat(o||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(t,"__esModule",{value:!0}),t.Generator=t.Element=void 0;var r=i(e(229)),s=function(){function n(t,e,o,i){this.in_connections=[],this.out_connections=[],this.state=[],this.name="","string"==typeof t?(this.name=t,e instanceof n&&o instanceof n&&this.concat(e,o),e instanceof Array&&o instanceof Array&&i instanceof Array&&this.setParams(e,o,i)):(t instanceof n&&e instanceof n&&this.concat(t,e),t instanceof Array&&e instanceof Array&&o instanceof Array&&this.setParams(t,e,o))}return n.prototype.setParams=function(n,t,e){for(var o=0;o<t.length;o++)this.out_connections.push(r.default.Connection.create({name:t[o],element:this}));return this.in_connections=n,this},n.prototype.concat=function(n,t){var e=n.clone(),o=t.clone();if(e.out_connections.length<o.in_connections.length){for(var i=0;i<e.out_connections.length;i++)o.in(o.in_connections[i],e.out_connections[i]);for(i=0;i<e.in_connections.length;i++)this.in_connections.push(e.in_connections[i]);for(i=e.out_connections.length;i<o.in_connections.length;i++)this.in_connections.push(o.in_connections[i]);for(i=0;i<o.out_connections.length;i++)this.out_connections.push(o.out_connections[i])}else{for(i=0;i<o.in_connections.length;i++)o.in(o.in_connections[i],e.out_connections[i]);for(i=0;i<o.out_connections.length;i++)this.out_connections.push(o.out_connections[i]);for(i=o.in_connections.length;i<e.out_connections.length;i++)this.out_connections.push(e.out_connections[i]);for(i=0;i<e.in_connections.length;i++)this.in_connections.push(e.in_connections[i])}for(i=0;i<this.out_connections.length;i++)this.out_connections[i]=this.out_connections[i].clone(this);return this},n.prototype.add=function(n){if(this.in_connections.length<n.out_connections.length)for(var t=this.in_connections.length,e=0;e<t;e++)this.in(this.in_connections[e],n.out_connections[e]);else for(e=0;e<n.out_connections.length;e++)this.in(this.in_connections[e],n.out_connections[e]);return this},n.prototype.in=function(n,t){if(t){t.inConnect({name:n,element:this});for(var e=0;e<this.in_connections.length;e++)if(this.in_connections[e]===n){this.in_connections[e]=t;break}return t}for(e=0;e<this.in_connections.length;e++)if("string"==typeof this.in_connections[e]){if(this.in_connections[e]===n)return this.in_connections[e]}else if(this.in_connections[e].findInString(this)===n)return this.in_connections[e];return""},n.prototype.inIndex=function(n){for(var t=0;t<this.in_connections.length;t++)if("string"==typeof this.in_connections[t]){if(this.in_connections[t]===n)return t}else if(this.in_connections[t].findInString(this)===n)return t;return-1},n.prototype.out=function(n){for(var t=0;t<this.out_connections.length;t++)if(this.out_connections[t].out.name===n)return this.out_connections[t];return{}},n.prototype.genState=function(n){this.state=new Array(Math.pow(2,this.in_connections.length)).fill(new Array(this.out_connections.length).fill("z"));for(var t=0;t<n.length;t++)if("object"==typeof n[t]&&"in"in n[t]&&"out"in n[t])this.genStateDetailSignal(n[t]);else if("object"==typeof n[t]&&"name"in n[t]&&"state"in n[t]&&"out"in n[t])this.genStateSignal(n[t]);else for(var e=new Array(this.out_connections.length).fill("z"),o=0;o<this.state.length;o++)if(JSON.stringify(this.state[o])===JSON.stringify(e)){this.state[o]=n[o];break}return[]},n.prototype.genStateDetailSignal=function(n){Array.isArray(n.in)&&(n.in=n.in.join(""));for(var t=!0,e=0;e<n.in.length;e++)"x"===n.in[e]&&(this.genStateDetailSignal({in:n.in.slice(0,e)+0+n.in.slice(e+1),out:n.out}),this.genStateDetailSignal({in:n.in.slice(0,e)+1+n.in.slice(e+1),out:n.out}),t=!1);t&&("string"==typeof n.out&&(n.out=this.genStateGenOutFromStr(n.out)),this.state[parseInt(n.in,2)]=n.out)},n.prototype.genStateSignal=function(n,t){if("object"==typeof n.out&&"name"in n.out&&"state"in n.out&&"out"in n.out)t?(t.push([this.inIndex(n.name),n.state]),this.genStateSignal(n.out,t)):this.genStateSignal(n.out,[[this.inIndex(n.name),n.state]]);else{var e=new Array(this.in_connections.length).fill("x");if(t)for(var o=0;o<t.length;o++)e[t[o][0]]=t[o][1];e[this.inIndex(n.name)]=n.state,this.genStateDetailSignal({in:e,out:n.out})}},n.prototype.genStateGenOutFromStr=function(n){for(var t=[],e=0;e<n.length;e++){var o=n[e],i=parseInt(o,10);isNaN(i)?t.push(o):t.push(i)}return t},n.prototype.clone=function(){for(var t=new n,e=0;e<this.out_connections.length;e++)t.out_connections.push(this.out_connections[e].clone(t));for(e=0;e<this.in_connections.length;e++)"string"==typeof this.in_connections[e]?t.in_connections.push(this.in_connections[e]):t.in_connections.push(this.in_connections[e].findInString(this));return t.state=o([],this.state,!0),t},n.prototype.isAllInConnected=function(){for(var n=0;n<this.in_connections.length;n++)if("string"==typeof this.in_connections[n])return!1;return!0},n.prototype.isAllSignalNotZ=function(){for(var n=0;n<this.state.length;n++)for(var t=0;t<this.state[n].length;t++)if("z"===this.state[n][t])return!1;return!0},n.prototype.isReady=function(){return this.isAllInConnected()&&this.isAllSignalNotZ()},n}();t.Element=s;var c=function(){function n(n,t){"string"==typeof n&&t?(this.frequency=t,this.out_connections=[r.default.Connection.create({name:n,element:this})]):(this.frequency=n,this.out_connections=[r.default.Connection.create({name:"",element:this})])}return n.prototype.out=function(n){return n&&n!==this.out_connections[0].out.name&&(this.out_connections[0].out.name=n),this.out_connections[0]},n.prototype.clone=function(){var t=new n(this.frequency);return t.out(this.out().out.name),t},n.prototype.isAllInConnected=function(){return!1!==this.out_connections[0].in},n.prototype.isReady=function(){return this.isAllInConnected()&&""!==this.out_connections[0].out.name},n}();t.Generator=c},166:function(n,t){var e=this&&this.__spreadArray||function(n,t,e){if(e||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return n.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function n(n){this.tree=[],this.genGraph(n)}return n.prototype.genGraph=function(n){var t=new Set;this.findGenerators(n,t);for(var e=[],o=0;o<this.tree.length;o++)this.genGraphNode(this.tree[o],e)},n.prototype.findGenerators=function(n,t){if(t.add(n),"in_connections"in n){for(var e=0;e<n.in_connections.length;e++){var o=n.in_connections[e].out.element;t.has(o)||this.findGenerators(o,t)}for(e=0;e<n.out_connections.length;e++)if(n.out_connections[e].in)for(var i=0;i<n.out_connections[e].in.length;i++)o=n.out_connections[e].in[i].element,t.has(o)||this.findGenerators(o,t)}else this.tree.push({element:n,connection:[],out:[]});return this.tree},n.prototype.genGraphNode=function(n,t){for(var e=n.element,o=0;o<e.out_connections.length;o++)if(e.out_connections[o].in)for(var i=function(i){var s=e.out_connections[o].in[i].element,c=t.find((function(n){return n.element===s}));if(c)c.connection.push(e.out_connections[o]),n.out.push(c);else{var u={element:s,connection:[e.out_connections[o]],out:[]};n.out.push(u),t.push(u),r.genGraphNode(u,t)}},r=this,s=0;s<e.out_connections[o].in.length;s++)i(s)},n.prototype.findElement=function(n){for(var t=0;t<this.tree.length;t++){var e=this.findElementNode(n,this.tree[t]);if(e)return e}return!1},n.prototype.findElementNode=function(n,t){if(n===t.element)return t;for(var e=0;e<t.out.length;e++){var o=this.findElementNode(n,t.out[e]);if(o)return o}return!1},n.prototype.getOutputs=function(){return[]},n.prototype.getInputs=function(){return[]},n.prototype.getGenerators=function(){return[]},n.prototype.getAllElementsDFS=function(){for(var n=this.getSetNodeDFS(),t=[],e=0;e<n.length;e++)t.push(n[e].element);return t},n.prototype.getAllElementsBFS=function(){for(var n=this.getAllNodeBFS(),t=[],e=function(e){t.find((function(t){return t===n[e].element}))||t.push(n[e].element)},o=0;o<n.length;o++)e(o);return t},n.prototype.getAllNodeDFS=function(){for(var n=[],t=0;t<this.tree.length;t++)this.DFSrec(this.tree[t],n);return n},n.prototype.DFSrec=function(n,t){t.push(n);for(var e=0;e<n.out.length;e++)this.DFSrec(n.out[e],t)},n.prototype.getAllNodeBFS=function(){for(var n=e([],this.tree,!0),t=this.getSetNodeDFS(),o=[];t.length>0;)for(var i,r=function(e){if(n.find((function(n){return n===t[e]})))t.splice(e,1),e--;else{for(var r=!0,s=function(n){if(!o.find((function(o){return o===t[e].connection[n]})))return r=!1,"break"},c=0;c<t[e].connection.length&&"break"!==s(c);c++);r&&(n.push(t[e]),o.push.apply(o,t[e].connection),t.splice(e,1),e--)}i=e},s=0;s<t.length;s++)r(s),s=i;return n},n.prototype.getSetNodeDFS=function(){return this.getAllNodeDFS().filter((function(n,t,e){return e.indexOf(n)===t}))},n.prototype.getSetNodeBFS=function(){return[]},n}();t.default=o},229:function(n,t,e){var o=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(e(154)),r={Connection:new(function(){function n(n){this.connectionClass=n}return n.prototype.create=function(n,t){return t?new this.connectionClass(n,t):new this.connectionClass(n)},n}())(i.default)};t.default=r},856:function(n,t,e){var o=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(t,"__esModule",{value:!0}),t.ElementGraph=t.Generator=t.Element=t.Connection=void 0;var i=o(e(154));t.Connection=i.default;var r=e(332);Object.defineProperty(t,"Element",{enumerable:!0,get:function(){return r.Element}}),Object.defineProperty(t,"Generator",{enumerable:!0,get:function(){return r.Generator}});var s=o(e(166));t.ElementGraph=s.default}},t={};return function e(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return n[o].call(r.exports,r,r.exports,e),r.exports}(856)})()));