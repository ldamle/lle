!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.lle=t():n.lle=t()}(this,(()=>(()=>{"use strict";var n={154:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(n,t){this.in=!1,this.out=n,t&&(Array.isArray(t)?(this.out=n,this.in=t):(this.out=n,this.in=[t]))}return n.prototype.inConnect=function(n){return Array.isArray(this.in)?this.in.push(n):this.in=[n],this},n.prototype.disConnect=function(n){if(Array.isArray(this.in)){for(var t=0;t<this.in.length;t++)if(this.in[t].name===n.name&&this.in[t].element===n.element){this.in.splice(t,1);break}0==this.in.length&&(this.in=!1)}return this},n.prototype.inConnects=function(n){var t;return Array.isArray(this.in)?(t=this.in).push.apply(t,n):this.in=n,this},n.prototype.disConnects=function(n){if(Array.isArray(this.in))for(var t=0;t<n.length;t++)this.disConnect(n[t]);return this},n.prototype.isConnected=function(){return Array.isArray(this.in)&&this.in.length>0},n.prototype.lenInConnected=function(){return Array.isArray(this.in)?this.in.length:0},n.prototype.clone=function(t){return new n({name:this.out.name,element:t})},n.prototype.getArrayInString=function(){var n=[];if(Array.isArray(this.in))for(var t=0;t<this.in.length;t++)n.push(this.in[t].name);return n},n.prototype.findInString=function(n){if(Array.isArray(this.in))for(var t=0;t<this.in.length;t++)if(this.in[t].element===n)return this.in[t].name;return""},n}();t.default=i},332:function(n,t,i){var e=this&&this.__spreadArray||function(n,t,i){if(i||2===arguments.length)for(var e,o=0,s=t.length;o<s;o++)!e&&o in t||(e||(e=Array.prototype.slice.call(t,0,o)),e[o]=t[o]);return n.concat(e||Array.prototype.slice.call(t))},o=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(i(229)),r=function(){function n(t,i,e){this.in_connections=[],this.out_connections=[],this.state=[],t instanceof n&&i instanceof n&&this.concat(t,i),t instanceof Array&&i instanceof Array&&e instanceof Array&&this.setParams(t,i,e)}return n.prototype.setParams=function(n,t,i){for(var e=0;e<t.length;e++)this.out_connections.push(s.default.Connection.create({name:t[e],element:this}));return this.in_connections=n,this},n.prototype.concat=function(n,t){var i=n.clone(),e=t.clone();if(i.out_connections.length<e.in_connections.length){for(var o=0;o<i.out_connections.length;o++)e.in(e.in_connections[o],i.out_connections[o]);for(o=0;o<i.in_connections.length;o++)this.in_connections.push(i.in_connections[o]);for(o=i.out_connections.length;o<e.in_connections.length;o++)this.in_connections.push(e.in_connections[o]);for(o=0;o<e.out_connections.length;o++)this.out_connections.push(e.out_connections[o])}else{for(o=0;o<e.in_connections.length;o++)e.in(e.in_connections[o],i.out_connections[o]);for(o=0;o<e.out_connections.length;o++)this.out_connections.push(e.out_connections[o]);for(o=e.in_connections.length;o<i.out_connections.length;o++)this.out_connections.push(i.out_connections[o]);for(o=0;o<i.in_connections.length;o++)this.in_connections.push(i.in_connections[o])}for(o=0;o<this.out_connections.length;o++)this.out_connections[o]=this.out_connections[o].clone(this);return this},n.prototype.add=function(n){if(this.in_connections.length<n.out_connections.length)for(var t=this.in_connections.length,i=0;i<t;i++)this.in(this.in_connections[i],n.out_connections[i]);else for(i=0;i<n.out_connections.length;i++)this.in(this.in_connections[i],n.out_connections[i]);return this},n.prototype.in=function(n,t){if(t){t.inConnect({name:n,element:this});for(var i=0;i<this.in_connections.length;i++)if(this.in_connections[i]===n){this.in_connections[i]=t;break}return t}for(i=0;i<this.in_connections.length;i++)if("string"==typeof this.in_connections[i]){if(this.in_connections[i]===n)return this.in_connections[i]}else if(this.in_connections[i].findInString(this)===n)return this.in_connections[i];return""},n.prototype.inIndex=function(n){for(var t=0;t<this.in_connections.length;t++)if("string"==typeof this.in_connections[t]){if(this.in_connections[t]===n)return t}else if(this.in_connections[t].findInString(this)===n)return t;return-1},n.prototype.out=function(n){for(var t=0;t<this.out_connections.length;t++)if(this.out_connections[t].out.name===n)return this.out_connections[t];return{}},n.prototype.genState=function(n){this.state=new Array(Math.pow(2,this.in_connections.length)).fill(new Array(this.out_connections.length).fill("z"));for(var t=0;t<n.length;t++)if("object"==typeof n[t]&&"in"in n[t]&&"out"in n[t])this.genStateDetailSignal(n[t]);else if("object"==typeof n[t]&&"name"in n[t]&&"state"in n[t]&&"out"in n[t])this.genStateSignal(n[t]);else for(var i=new Array(this.out_connections.length).fill("z"),e=0;e<this.state.length;e++)if(JSON.stringify(this.state[e])===JSON.stringify(i)){this.state[e]=n[e];break}return[]},n.prototype.genStateDetailSignal=function(n){Array.isArray(n.in)&&(n.in=n.in.join(""));for(var t=!0,i=0;i<n.in.length;i++)"x"===n.in[i]&&(this.genStateDetailSignal({in:n.in.slice(0,i)+0+n.in.slice(i+1),out:n.out}),this.genStateDetailSignal({in:n.in.slice(0,i)+1+n.in.slice(i+1),out:n.out}),t=!1);t&&("string"==typeof n.out&&(n.out=this.genStateGenOutFromStr(n.out)),this.state[parseInt(n.in,2)]=n.out)},n.prototype.genStateSignal=function(n,t){if("object"==typeof n.out&&"name"in n.out&&"state"in n.out&&"out"in n.out)t?(t.push([this.inIndex(n.name),n.state]),this.genStateSignal(n.out,t)):this.genStateSignal(n.out,[[this.inIndex(n.name),n.state]]);else{var i=new Array(this.in_connections.length).fill("x");if(t)for(var e=0;e<t.length;e++)i[t[e][0]]=t[e][1];i[this.inIndex(n.name)]=n.state,this.genStateDetailSignal({in:i,out:n.out})}},n.prototype.genStateGenOutFromStr=function(n){for(var t=[],i=0;i<n.length;i++){var e=n[i],o=parseInt(e,10);isNaN(o)?t.push(e):t.push(o)}return t},n.prototype.clone=function(){for(var t=new n,i=0;i<this.out_connections.length;i++)t.out_connections.push(this.out_connections[i].clone(t));for(i=0;i<this.in_connections.length;i++)"string"==typeof this.in_connections[i]?t.in_connections.push(this.in_connections[i]):t.in_connections.push(this.in_connections[i].findInString(this));return t.state=e([],this.state,!0),t},n.prototype.isAllInConnected=function(){for(var n=0;n<this.in_connections.length;n++)if("string"==typeof this.in_connections[n])return!1;return!0},n.prototype.isAllSignalNotZ=function(){for(var n=0;n<this.state.length;n++)for(var t=0;t<this.state[n].length;t++)if("z"===this.state[n][t])return!1;return!0},n.prototype.isReady=function(){return this.isAllInConnected()&&this.isAllSignalNotZ()},n}();t.default=r},229:function(n,t,i){var e=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(t,"__esModule",{value:!0});var o=e(i(154)),s={Connection:new(function(){function n(n){this.connectionClass=n}return n.prototype.create=function(n,t){return t?new this.connectionClass(n,t):new this.connectionClass(n)},n}())(o.default)};t.default=s},856:function(n,t,i){var e=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(t,"__esModule",{value:!0}),t.Element=t.Connection=void 0;var o=e(i(154));t.Connection=o.default;var s=e(i(332));t.Element=s.default}},t={};return function i(e){var o=t[e];if(void 0!==o)return o.exports;var s=t[e]={exports:{}};return n[e].call(s.exports,s,s.exports,i),s.exports}(856)})()));